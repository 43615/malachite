use malachite_base_test_util::stats::common_values_map::common_values_map;

use malachite_base::num::basic::signeds::PrimitiveSigned;
use malachite_base::num::random::random_natural_signeds;
use malachite_base::random::EXAMPLE_SEED;

fn random_natural_signeds_helper<T: PrimitiveSigned>(values: &[T], common_values: &[(T, usize)]) {
    let xs = random_natural_signeds::<T>(EXAMPLE_SEED);
    assert_eq!(xs.clone().take(20).collect::<Vec<T>>(), values);
    assert_eq!(common_values_map(1_000_000, 10, xs), common_values)
}

#[allow(clippy::decimal_literal_representation)]
#[test]
fn test_random_natural_signeds() {
    random_natural_signeds_helper::<i8>(
        &[
            113, 100, 87, 60, 93, 61, 117, 23, 7, 72, 105, 12, 114, 39, 104, 100, 114, 111, 107, 72,
        ],
        &[
            (121, 8065),
            (55, 8045),
            (88, 8031),
            (80, 8005),
            (27, 8004),
            (45, 7997),
            (74, 7997),
            (63, 7966),
            (2, 7958),
            (68, 7954),
        ],
    );
    random_natural_signeds_helper::<i16>(
        &[
            28529, 21220, 8279, 8892, 18525, 5565, 4725, 10647, 9735, 32584, 27625, 4620, 11890,
            11815, 9576, 31460, 30962, 27119, 21995, 23240,
        ],
        &[
            (11780, 58),
            (24576, 56),
            (31545, 55),
            (2289, 53),
            (4953, 53),
            (7844, 53),
            (9160, 53),
            (11491, 53),
            (4374, 51),
            (13255, 51),
        ],
    );
    random_natural_signeds_helper::<i32>(
        &[
            1816522609, 564712164, 1399726167, 1851335356, 1939195997, 1238996413, 1210028661,
            565094807, 273753607, 7438152, 1999530985, 1940132364, 2000399986, 950054439,
            2086937960, 1164671716, 246675698, 1027467759, 130045419, 851008200,
        ],
        &[
            (11832086, 2),
            (20095656, 2),
            (29107328, 2),
            (56357011, 2),
            (59094137, 2),
            (63099091, 2),
            (80689768, 2),
            (83328146, 2),
            (91106307, 2),
            (96543416, 2),
        ],
    );
    random_natural_signeds_helper::<i64>(
        &[
            2425420277849911153,
            7951424809348243543,
            5321449075635505245,
            2427063716414460533,
            31946622003914247,
            8332805055290698729,
            4080452749072510578,
            5002226935030621544,
            4412940424993569010,
            3655052387757872619,
            4350459466072129620,
            1513424385005459611,
            2484972586252155822,
            3848928208746843485,
            4344958725064805398,
            3252798961345668310,
            1297279719346569963,
            3156472401733769857,
            6654913321726770291,
            1282496163975809159,
        ],
        &[
            (6968038938278, 1),
            (19957933690896, 1),
            (26914038281329, 1),
            (32553719576594, 1),
            (41442117097267, 1),
            (53892651831494, 1),
            (61037235675918, 1),
            (66354421349686, 1),
            (77015013516905, 1),
            (86226284907602, 1),
        ],
    );
    random_natural_signeds_helper::<i128>(
        &[
            146677898479391812904420101066401902449,
            44771423227283929645271838218448652381,
            153713122271060689373259186508789786119,
            92274800069126412258941638023956901490,
            67423815972970482835561806782381947122,
            27917752305106984883503397141734686804,
            71000193624834355047251695120932977582,
            60003549963171791765607325839025294358,
            58226638570510174137591056921007784683,
            23657878512375990951480114302402821235,
            16555025480749416236391519909303953693,
            33018320828004690757952445968579104952,
            24887066387352849554815992782110776358,
            79085537771456044427857440036467563654,
            19637669411666889498466854442215856999,
            67446348860286551304220317962951715741,
            84842654385226266288840053522766466823,
            102196199637000142636212685073291673967,
            105189689748742230503365861545668092951,
            88286211999829950505570386305677035352,
        ],
        &[
            (68570815139656170990830410045915, 1),
            (368158895036039754938992656203391, 1),
            (381682482227926990846204728028719, 1),
            (565207126752383841908924745713103, 1),
            (717866653939818807939025508430762, 1),
            (775173738585689418081884794376186, 1),
            (818497230601034032775791540657915, 1),
            (1074937517214628239553404142434478, 1),
            (1125938265480358883127299361175943, 1),
            (1224023028796761386468452212527255, 1),
        ],
    );
}
