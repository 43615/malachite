use malachite_base_test_util::stats::common_values_map::common_values_map;

use malachite_base::num::basic::signeds::PrimitiveSigned;
use malachite_base::num::random::random_negative_signeds;
use malachite_base::random::EXAMPLE_SEED;

fn random_negative_signeds_helper<T: PrimitiveSigned>(values: &[T], common_values: &[(T, usize)]) {
    let xs = random_negative_signeds::<T>(EXAMPLE_SEED);
    assert_eq!(xs.clone().take(20).collect::<Vec<T>>(), values);
    assert_eq!(common_values_map(1_000_000, 10, xs), common_values)
}

#[allow(clippy::decimal_literal_representation)]
#[test]
fn test_random_negative_signeds() {
    random_negative_signeds_helper::<i8>(
        &[
            -15, -28, -41, -68, -35, -67, -11, -105, -121, -56, -23, -116, -14, -89, -24, -28, -14,
            -17, -21, -56,
        ],
        &[
            (-7, 8065),
            (-73, 8045),
            (-40, 8031),
            (-48, 8005),
            (-101, 8004),
            (-54, 7997),
            (-83, 7997),
            (-65, 7966),
            (-126, 7958),
            (-60, 7954),
        ],
    );
    random_negative_signeds_helper::<i16>(
        &[
            -4239, -11548, -24489, -23876, -14243, -27203, -28043, -22121, -23033, -184, -5143,
            -28148, -20878, -20953, -23192, -1308, -1806, -5649, -10773, -9528,
        ],
        &[
            (-20988, 58),
            (-8192, 56),
            (-1223, 55),
            (-21277, 53),
            (-23608, 53),
            (-24924, 53),
            (-27815, 53),
            (-30479, 53),
            (-11773, 51),
            (-14255, 51),
        ],
    );
    random_negative_signeds_helper::<i32>(
        &[
            -330961039,
            -1582771484,
            -747757481,
            -296148292,
            -208287651,
            -908487235,
            -937454987,
            -1582388841,
            -1873730041,
            -2140045496,
            -147952663,
            -207351284,
            -147083662,
            -1197429209,
            -60545688,
            -982811932,
            -1900807950,
            -1120015889,
            -2017438229,
            -1296475448,
        ],
        &[
            (-21329002, 2),
            (-46150866, 2),
            (-54996302, 2),
            (-59532811, 2),
            (-66341078, 2),
            (-72250103, 2),
            (-81496956, 2),
            (-83331506, 2),
            (-88423413, 2),
            (-90103020, 2),
        ],
    );
    random_negative_signeds_helper::<i64>(
        &[
            -6797951759004864655,
            -1271947227506532265,
            -3901922961219270563,
            -6796308320440315275,
            -9191425414850861561,
            -890566981564077079,
            -5142919287782265230,
            -4221145101824154264,
            -4810431611861206798,
            -5568319649096903189,
            -4872912570782646188,
            -7709947651849316197,
            -6738399450602619986,
            -5374443828107932323,
            -4878413311789970410,
            -5970573075509107498,
            -7926092317508205845,
            -6066899635121005951,
            -2568458715128005517,
            -7940875872878966649,
        ],
        &[
            (-22303660901939, 1),
            (-30497061311649, 1),
            (-45554336062456, 1),
            (-45700426911569, 1),
            (-50232881235535, 1),
            (-98533258057512, 1),
            (-99023209454232, 1),
            (-106167936019845, 1),
            (-114150965713548, 1),
            (-138932091854646, 1),
        ],
    );
    random_negative_signeds_helper::<i128>(
        &[
            -23463284981077418827267202649482203279,
            -125369760233185302086415465497435453347,
            -16428061189408542358428117207094319609,
            -77866383391342819472745665691927204238,
            -102717367487498748896125496933502158606,
            -142223431155362246848183906574149418924,
            -99140989835634876684435608594951128146,
            -110137633497297439966079977876858811370,
            -111914544889959057594096246794876321045,
            -146483304948093240780207189413481284493,
            -153586157979719815495295783806580152035,
            -137122862632464540973734857747305000776,
            -145254117073116382176871310933773329370,
            -91055645689013187303829863679416542074,
            -150503514048802342233220449273668248729,
            -102694834600182680427466985752932389987,
            -85298529075242965442847250193117638905,
            -67944983823469089095474618642592431761,
            -64951493711727001228321442170216012777,
            -81854971460639281226116917410207070376,
        ],
        &[
            (-307666299724089175945459600408325, 1),
            (-411429924564869001796009206817675, 1),
            (-413570452196184856884474016102340, 1),
            (-789195894019805665974324122519229, 1),
            (-843024079296967638987633859098218, 1),
            (-926633104236955359276901842016159, 1),
            (-1286943689405430016863515337971589, 1),
            (-1299189825673750198478910507258059, 1),
            (-1817617794135686054996535771368739, 1),
            (-1841568568885601990044560857724957, 1),
        ],
    );
}
